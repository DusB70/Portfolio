"use client";

/**
 * Skills Section - Grid layout with hover interactions and tech icons
 *
 * Animation Logic:
 * - Desktop: Scroll-triggered parallax and staggered reveals
 * - Mobile: Simple fade-in for 60fps performance
 */

import { motion, useTransform } from "framer-motion";
import { useRef } from "react";
import { useDeviceOptimization } from "@/hooks/useDeviceOptimization";
import { useSafeScroll } from "@/hooks/useScrollUtils";

// Skill icons as SVG components
const skillIcons: { [key: string]: React.ReactNode } = {
  // Frontend
  React: (
    <svg
      viewBox="0 0 24 24"
      className="w-8 h-8 md:w-10 md:h-10"
      fill="currentColor"
    >
      <path d="M12 9.861a2.139 2.139 0 100 4.278 2.139 2.139 0 100-4.278zm-5.992 6.394l-.472-.12C2.018 15.246 0 13.737 0 11.996s2.018-3.25 5.536-4.139l.472-.119.133.468a23.53 23.53 0 001.363 3.578l.101.213-.101.213a23.307 23.307 0 00-1.363 3.578l-.133.467zM5.317 8.95c-2.674.751-4.315 1.9-4.315 3.046 0 1.145 1.641 2.294 4.315 3.046a24.95 24.95 0 011.182-3.046A24.752 24.752 0 015.317 8.95zm12.675 7.305l-.133-.469a23.357 23.357 0 00-1.364-3.577l-.101-.213.101-.213a23.42 23.42 0 001.364-3.578l.133-.468.473.119c3.517.889 5.535 2.398 5.535 4.14s-2.018 3.25-5.535 4.139l-.473.12zm-.491-4.259c.48 1.039.877 2.06 1.182 3.046 2.675-.752 4.315-1.901 4.315-3.046 0-1.146-1.641-2.294-4.315-3.046a24.788 24.788 0 01-1.182 3.046zM5.31 8.945l-.133-.467C4.188 4.992 4.488 2.494 6 1.622c1.483-.856 3.864.155 6.359 2.716l.34.349-.34.349a23.552 23.552 0 00-2.422 2.967l-.135.193-.235.02a23.657 23.657 0 00-3.785.61l-.472.119zm1.896-6.63c-.268 0-.505.058-.705.173-.994.573-1.17 2.565-.485 5.253a25.122 25.122 0 013.233-.501 24.847 24.847 0 012.052-2.544c-1.56-1.519-3.037-2.381-4.095-2.381zm9.589 20.362c-.001 0-.001 0 0 0-1.425 0-3.255-1.073-5.154-3.023l-.34-.349.34-.349a23.53 23.53 0 002.421-2.968l.135-.193.234-.02a23.63 23.63 0 003.787-.609l.472-.119.134.468c.987 3.484.688 5.983-.824 6.854a2.38 2.38 0 01-1.205.308zm-4.096-3.381c1.56 1.519 3.037 2.381 4.095 2.381h.001c.267 0 .505-.058.704-.173.994-.573 1.171-2.566.485-5.254a25.02 25.02 0 01-3.234.501 24.674 24.674 0 01-2.051 2.545zM18.69 8.945l-.472-.119a23.479 23.479 0 00-3.787-.61l-.234-.02-.135-.193a23.414 23.414 0 00-2.421-2.967l-.34-.349.34-.349C14.135 1.778 16.515.767 18 1.622c1.512.872 1.812 3.37.824 6.855l-.134.468zM14.75 7.24c1.142.104 2.227.273 3.234.501.686-2.688.509-4.68-.485-5.253-.988-.571-2.845.304-4.8 2.208A24.849 24.849 0 0114.75 7.24zM7.206 22.677A2.38 2.38 0 016 22.369c-1.512-.871-1.812-3.369-.823-6.854l.132-.468.472.119c1.155.291 2.429.496 3.785.609l.235.02.134.193a23.596 23.596 0 002.422 2.968l.34.349-.34.349c-1.898 1.95-3.728 3.023-5.151 3.023zm-1.19-6.427c-.686 2.688-.509 4.681.485 5.254.987.563 2.843-.305 4.8-2.208a24.998 24.998 0 01-2.052-2.545 24.976 24.976 0 01-3.233-.501zm5.984.628c-.823 0-1.669-.036-2.516-.106l-.235-.02-.135-.193a30.388 30.388 0 01-1.35-2.122 30.354 30.354 0 01-1.166-2.228l-.1-.213.1-.213a30.3 30.3 0 011.166-2.228c.414-.716.869-1.43 1.35-2.122l.135-.193.235-.02a29.785 29.785 0 015.033 0l.234.02.134.193a30.006 30.006 0 012.517 4.35l.101.213-.101.213a29.6 29.6 0 01-2.517 4.35l-.134.193-.234.02c-.847.07-1.694.106-2.517.106zm-2.197-1.084c1.48.111 2.914.111 4.395 0a29.006 29.006 0 002.196-3.798 28.585 28.585 0 00-2.197-3.798 29.031 29.031 0 00-4.394 0 28.477 28.477 0 00-2.197 3.798 29.114 29.114 0 002.197 3.798z" />
    </svg>
  ),
  "Next.js": (
    <svg
      viewBox="0 0 24 24"
      className="w-8 h-8 md:w-10 md:h-10"
      fill="currentColor"
    >
      <path d="M11.5725 0c-.1763 0-.3098.0013-.3584.0067-.0516.0053-.2159.021-.3636.0328-3.4088.3073-6.6017 2.1463-8.624 4.9728C1.1004 6.584.3802 8.3666.1082 10.255c-.0962.659-.108.8537-.108 1.7474s.012 1.0884.108 1.7476c.652 4.506 3.8591 8.2919 8.2087 9.6945.7789.2511 1.6.4223 2.5337.5255.3636.04 1.9354.04 2.299 0 1.6117-.1783 2.9772-.577 4.3237-1.2643.2065-.1056.2464-.1337.2183-.1573-.0188-.0139-.8987-1.1938-1.9543-2.62l-1.919-2.592-2.4047-3.5583c-1.3231-1.9564-2.4117-3.556-2.4211-3.556-.0094-.0026-.0187 1.5787-.0235 3.509-.0067 3.3802-.0093 3.5162-.0516 3.596-.061.115-.108.1618-.2064.2134-.075.0374-.1408.0445-.495.0445h-.406l-.1078-.068a.4383.4383 0 01-.1572-.1712l-.0493-.1056.0053-4.703.0067-4.7054.0726-.0915c.0376-.0493.1174-.1125.1736-.143.0962-.047.1338-.0517.5765-.0517.5765 0 .6078.0063.7143.1218.0281.0322 1.3379 2.0027 2.9106 4.38l4.7628 7.2036 2.4162 3.6521.1108-.0714a10.45 10.45 0 002.4543-2.1903c1.0173-1.2854 1.7474-2.8037 2.1288-4.4283.2685-.9577.3288-1.4944.3288-2.8729 0-1.3787-.0605-1.9154-.3288-2.873-.7821-2.8051-2.7088-5.1724-5.261-6.4618-1.2758-.6452-2.5994-1.0145-4.0594-1.1308a42.037 42.037 0 00-.9124-.0157c-.1743-.0053-.6252.0027-.6252.0027zm4.0585 7.2169c.3584.0187.528.0376.625.0655.1687.0468.3584.1712.4394.2876.0655.0937.0702.1405.0702 2.7408v2.6435l-1.1495-1.7598-1.1494-1.7622V8.1568c0-1.3056.0117-1.6734.047-1.747.0515-.1056.1595-.2064.2838-.2669.0843-.0374.1408-.0445.4676-.0468.2014-.0028.3957.0026.4359.0068z" />
    </svg>
  ),
  TypeScript: (
    <svg
      viewBox="0 0 24 24"
      className="w-8 h-8 md:w-10 md:h-10"
      fill="currentColor"
    >
      <path d="M1.125 0C.502 0 0 .502 0 1.125v21.75C0 23.498.502 24 1.125 24h21.75c.623 0 1.125-.502 1.125-1.125V1.125C24 .502 23.498 0 22.875 0zm17.363 9.75c.612 0 1.154.037 1.627.111a6.38 6.38 0 0 1 1.306.34v2.458a3.95 3.95 0 0 0-.643-.361 5.093 5.093 0 0 0-.717-.26 5.453 5.453 0 0 0-1.426-.2c-.3 0-.573.028-.819.086a2.1 2.1 0 0 0-.623.242c-.17.104-.3.229-.393.374a.888.888 0 0 0-.14.49c0 .196.053.373.156.529.104.156.252.304.443.444s.423.276.696.41c.273.135.582.274.926.416.47.197.892.407 1.266.628.374.222.695.473.963.753.268.279.472.598.614.957.142.359.214.776.214 1.253 0 .657-.125 1.21-.373 1.656a3.033 3.033 0 0 1-1.012 1.085 4.38 4.38 0 0 1-1.487.596c-.566.12-1.163.18-1.79.18a9.916 9.916 0 0 1-1.84-.164 5.544 5.544 0 0 1-1.512-.493v-2.63a5.033 5.033 0 0 0 3.237 1.2c.333 0 .624-.03.872-.09.249-.06.456-.144.623-.25.166-.108.29-.234.373-.38a1.023 1.023 0 0 0-.074-1.089 2.12 2.12 0 0 0-.537-.5 5.597 5.597 0 0 0-.807-.444 27.72 27.72 0 0 0-1.007-.436c-.918-.383-1.602-.852-2.053-1.405-.45-.553-.676-1.222-.676-2.005 0-.614.123-1.141.369-1.582.246-.441.58-.804 1.004-1.089a4.494 4.494 0 0 1 1.47-.629 7.536 7.536 0 0 1 1.77-.201zm-15.113.188h9.563v2.166H9.506v9.646H6.789v-9.646H3.375z" />
    </svg>
  ),
  "Tailwind CSS": (
    <svg
      viewBox="0 0 24 24"
      className="w-8 h-8 md:w-10 md:h-10"
      fill="currentColor"
    >
      <path d="M12.001,4.8c-3.2,0-5.2,1.6-6,4.8c1.2-1.6,2.6-2.2,4.2-1.8c0.913,0.228,1.565,0.89,2.288,1.624 C13.666,10.618,15.027,12,18.001,12c3.2,0,5.2-1.6,6-4.8c-1.2,1.6-2.6,2.2-4.2,1.8c-0.913-0.228-1.565-0.89-2.288-1.624 C16.337,6.182,14.976,4.8,12.001,4.8z M6.001,12c-3.2,0-5.2,1.6-6,4.8c1.2-1.6,2.6-2.2,4.2-1.8c0.913,0.228,1.565,0.89,2.288,1.624 c1.177,1.194,2.538,2.576,5.512,2.576c3.2,0,5.2-1.6,6-4.8c-1.2,1.6-2.6,2.2-4.2,1.8c-0.913-0.228-1.565-0.89-2.288-1.624 C10.337,13.382,8.976,12,6.001,12z" />
    </svg>
  ),
  HTML: (
    <svg
      viewBox="0 0 24 24"
      className="w-8 h-8 md:w-10 md:h-10"
      fill="currentColor"
    >
      <path d="M1.5 0h21l-1.91 21.563L11.977 24l-8.564-2.438L1.5 0zm7.031 9.75l-.232-2.718 10.059.003.23-2.622L5.412 4.41l.698 8.01h9.126l-.326 3.426-2.91.804-2.955-.81-.188-2.11H6.248l.33 4.171L12 19.351l5.379-1.443.744-8.157H8.531z" />
    </svg>
  ),
  CSS: (
    <svg
      viewBox="0 0 24 24"
      className="w-8 h-8 md:w-10 md:h-10"
      fill="currentColor"
    >
      <path d="M1.5 0h21l-1.91 21.563L11.977 24l-8.565-2.438L1.5 0zm17.09 4.413L5.41 4.41l.213 2.622 10.125.002-.255 2.716h-6.64l.24 2.573h6.182l-.366 3.523-2.91.804-2.956-.81-.188-2.11h-2.61l.29 3.855L12 19.288l5.373-1.53L18.59 4.414z" />
    </svg>
  ),
  // Backend
  "Node.js": (
    <svg
      viewBox="0 0 24 24"
      className="w-8 h-8 md:w-10 md:h-10"
      fill="currentColor"
    >
      <path d="M11.998,24c-0.321,0-0.641-0.084-0.922-0.247l-2.936-1.737c-0.438-0.245-0.224-0.332-0.08-0.383 c0.585-0.203,0.703-0.25,1.328-0.604c0.065-0.037,0.151-0.023,0.218,0.017l2.256,1.339c0.082,0.045,0.197,0.045,0.272,0l8.795-5.076 c0.082-0.047,0.134-0.141,0.134-0.238V6.921c0-0.099-0.053-0.192-0.137-0.242l-8.791-5.072c-0.081-0.047-0.189-0.047-0.271,0 L3.075,6.68C2.99,6.729,2.936,6.825,2.936,6.921v10.15c0,0.097,0.054,0.189,0.139,0.235l2.409,1.392 c1.307,0.654,2.108-0.116,2.108-0.89V7.787c0-0.142,0.114-0.253,0.256-0.253h1.115c0.139,0,0.255,0.112,0.255,0.253v10.021 c0,1.745-0.95,2.745-2.604,2.745c-0.508,0-0.909,0-2.026-0.551L2.28,18.675c-0.57-0.329-0.922-0.945-0.922-1.604V6.921 c0-0.659,0.353-1.275,0.922-1.603l8.795-5.082c0.557-0.315,1.296-0.315,1.848,0l8.794,5.082c0.57,0.329,0.924,0.944,0.924,1.603 v10.15c0,0.659-0.354,1.273-0.924,1.604l-8.794,5.078C12.643,23.916,12.324,24,11.998,24z M19.099,13.993 c0-1.9-1.284-2.406-3.987-2.763c-2.731-0.361-3.009-0.548-3.009-1.187c0-0.528,0.235-1.233,2.258-1.233 c1.807,0,2.473,0.389,2.747,1.607c0.024,0.115,0.129,0.199,0.247,0.199h1.141c0.071,0,0.138-0.031,0.186-0.081 c0.048-0.054,0.074-0.123,0.067-0.196c-0.177-2.098-1.571-3.076-4.388-3.076c-2.508,0-4.004,1.058-4.004,2.833 c0,1.925,1.488,2.457,3.895,2.695c2.88,0.282,3.103,0.703,3.103,1.269c0,0.983-0.789,1.402-2.642,1.402 c-2.327,0-2.839-0.584-3.011-1.742c-0.02-0.124-0.126-0.215-0.253-0.215h-1.137c-0.141,0-0.254,0.112-0.254,0.253 c0,1.482,0.806,3.248,4.655,3.248C17.501,17.007,19.099,15.91,19.099,13.993z" />
    </svg>
  ),
  PostgreSQL: (
    <svg
      viewBox="0 0 24 24"
      className="w-8 h-8 md:w-10 md:h-10"
      fill="currentColor"
    >
      <path d="M23.5594 14.7228a.5269.5269 0 0 0-.0563-.1191c-.139-.2632-.4768-.3418-1.0074-.2321-1.6533.3411-2.2935.1312-2.5256-.0191 1.342-2.0482 2.445-4.522 3.0411-6.8297.2714-1.0507.7982-3.5237.1222-4.7316C22.4744.9957 21.2436.0503 18.104.0058c-.2656-.0037-.5314-.0022-.7972.006-.4566-.0038-.9186.0293-1.3803.0986-.1275-.0484-.2567-.0944-.3874-.1379-.818-.2717-1.6933-.42-2.5765-.4335-2.0566-.0319-3.9834.7001-5.4746 2.0665-.2199-.0669-.4398-.1278-.659-.1791a10.1833 10.1833 0 0 0-2.1042-.2254C2.117 1.4025.8505 2.3007.4499 3.5612c-.4305 1.3541-.0502 3.1451.3324 4.3765.1821.586.3934 1.1553.5956 1.5808-.1018 1.0129-.0464 2.0979.1683 3.2132.2758 1.4354.8126 2.5756 1.5955 3.3893.7455.7746 1.6585 1.191 2.6458 1.2075.2466.0044.4971-.0122.7493-.0479.6157 1.0945 1.5822 1.8302 2.6174 1.9917.1962.0308.3971.0466.6005.0472.8853 0 1.8102-.3046 2.6763-.8871.5618.3219 1.3503.4994 2.2665.4994.1994 0 .4066-.0114.6182-.0343.3015-.0322.5963-.0831.8827-.1506l.0086-.0019c1.2945-.3037 2.351-.8287 3.0593-1.5188.2515-.2451.4528-.5026.6016-.7701.2027-.365.3299-.7644.3853-1.1788.0372-.2842.0377-.5765.0015-.8677-.026-.2105-.087-.4104-.1795-.5909a.5286.5286 0 0 0 .0166-.2089 46.9416 46.9416 0 0 0-.0669-1.2617c-.0053-.0902-.0106-.1788-.0164-.2681l.002-.0025c.2469-.3179.4658-.6161.6614-.9006a.518.518 0 0 0 .0843-.1567.4766.4766 0 0 0 .0406-.1494z" />
    </svg>
  ),
  "REST APIs": (
    <svg
      viewBox="0 0 24 24"
      className="w-8 h-8 md:w-10 md:h-10"
      fill="currentColor"
    >
      <path d="M4 1h16a3 3 0 0 1 3 3v16a3 3 0 0 1-3 3H4a3 3 0 0 1-3-3V4a3 3 0 0 1 3-3zm0 2a1 1 0 0 0-1 1v16a1 1 0 0 0 1 1h16a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1H4zm2 3h12v2H6V6zm0 4h12v2H6v-2zm0 4h8v2H6v-2z" />
    </svg>
  ),
  // Tools & Others
  Git: (
    <svg
      viewBox="0 0 24 24"
      className="w-8 h-8 md:w-10 md:h-10"
      fill="currentColor"
    >
      <path d="M23.546 10.93L13.067.452c-.604-.603-1.582-.603-2.188 0L8.708 2.627l2.76 2.76c.645-.215 1.379-.07 1.889.441.516.515.658 1.258.438 1.9l2.658 2.66c.645-.223 1.387-.078 1.9.435.721.72.721 1.884 0 2.604-.719.719-1.881.719-2.6 0-.539-.541-.674-1.337-.404-1.996L12.86 8.955v6.525c.176.086.342.203.488.348.713.721.713 1.883 0 2.6-.719.721-1.889.721-2.609 0-.719-.719-.719-1.879 0-2.598.182-.18.387-.316.605-.406V8.835c-.217-.091-.424-.222-.6-.401-.545-.545-.676-1.342-.396-2.009L7.636 3.7.45 10.881c-.6.605-.6 1.584 0 2.189l10.48 10.477c.604.604 1.582.604 2.186 0l10.43-10.43c.605-.603.605-1.582 0-2.187" />
    </svg>
  ),
  GitHub: (
    <svg
      viewBox="0 0 24 24"
      className="w-8 h-8 md:w-10 md:h-10"
      fill="currentColor"
    >
      <path d="M12 0C5.374 0 0 5.373 0 12c0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23A11.509 11.509 0 0112 5.803c1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576C20.566 21.797 24 17.3 24 12c0-6.627-5.373-12-12-12z" />
    </svg>
  ),
  Vercel: (
    <svg
      viewBox="0 0 24 24"
      className="w-8 h-8 md:w-10 md:h-10"
      fill="currentColor"
    >
      <path d="M24 22.525H0l12-21.05 12 21.05z" />
    </svg>
  ),
  Figma: (
    <svg
      viewBox="0 0 24 24"
      className="w-8 h-8 md:w-10 md:h-10"
      fill="currentColor"
    >
      <path d="M15.852 8.981h-4.588V0h4.588c2.476 0 4.49 2.014 4.49 4.49s-2.014 4.491-4.49 4.491zM12.735 7.51h3.117c1.665 0 3.019-1.355 3.019-3.019s-1.355-3.019-3.019-3.019h-3.117V7.51zm0 1.471H8.148c-2.476 0-4.49-2.014-4.49-4.49S5.672 0 8.148 0h4.588v8.981zm-4.587-7.51c-1.665 0-3.019 1.355-3.019 3.019s1.354 3.02 3.019 3.02h3.117V1.471H8.148zm4.587 15.019H8.148c-2.476 0-4.49-2.014-4.49-4.49s2.014-4.49 4.49-4.49h4.588v8.98zM8.148 8.981c-1.665 0-3.019 1.355-3.019 3.019s1.355 3.019 3.019 3.019h3.117V8.981H8.148zM8.172 24c-2.489 0-4.515-2.014-4.515-4.49s2.014-4.49 4.49-4.49h4.588v4.441c0 2.503-2.047 4.539-4.563 4.539zm-.024-7.51a3.023 3.023 0 0 0-3.019 3.019c0 1.665 1.365 3.019 3.044 3.019 1.705 0 3.093-1.376 3.093-3.068v-2.97H8.148zm7.704 0h-.098c-2.476 0-4.49-2.014-4.49-4.49s2.014-4.49 4.49-4.49h.098c2.476 0 4.49 2.014 4.49 4.49s-2.014 4.49-4.49 4.49zm-.097-7.509c-1.665 0-3.019 1.355-3.019 3.019s1.355 3.019 3.019 3.019h.098c1.665 0 3.019-1.355 3.019-3.019s-1.355-3.019-3.019-3.019h-.098z" />
    </svg>
  ),
  Linux: (
    <svg
      viewBox="0 0 24 24"
      className="w-8 h-8 md:w-10 md:h-10"
      fill="currentColor"
    >
      <path d="M12.504 0c-.155 0-.315.008-.48.021-4.226.333-3.105 4.807-3.17 6.298-.076 1.092-.3 1.953-1.05 3.02-.885 1.051-2.127 2.75-2.716 4.521-.278.832-.41 1.684-.287 2.489a.424.424 0 00-.11.135c-.26.268-.45.6-.663.839-.199.199-.485.267-.797.4-.313.136-.658.269-.864.68-.09.189-.136.394-.132.602 0 .199.027.4.055.536.058.399.116.728.04.97-.249.68-.28 1.145-.106 1.484.174.334.535.47.94.601.81.2 1.91.135 2.774.6.926.466 1.866.67 2.616.47.526-.116.97-.464 1.208-.946.587-.003 1.23-.269 2.26-.334.699-.058 1.574.267 2.577.2.025.134.063.198.114.333l.003.003c.391.778 1.113 1.132 1.884 1.071.771-.06 1.592-.536 2.257-1.306.631-.765 1.683-1.084 2.378-1.503.348-.199.629-.469.649-.853.023-.4-.2-.811-.714-1.376v-.097l-.003-.003c-.17-.2-.25-.535-.338-.926-.085-.401-.182-.786-.492-1.046h-.003c-.059-.054-.123-.067-.188-.135a.357.357 0 00-.19-.064c.431-1.278.264-2.55-.173-3.694-.533-1.41-1.465-2.638-2.175-3.483-.796-1.005-1.576-1.957-1.56-3.368.026-2.152.236-6.133-3.544-6.139z" />
    </svg>
  ),
};

// Skills data with the new categorization
const skills = [
  {
    category: "Frontend",
    items: ["React", "Next.js", "TypeScript", "Tailwind CSS", "HTML", "CSS"],
    gradient: "from-blue-500/20 via-cyan-500/10 to-transparent",
  },
  {
    category: "Backend",
    items: ["Node.js", "PostgreSQL", "REST APIs"],
    gradient: "from-green-500/20 via-emerald-500/10 to-transparent",
  },
  {
    category: "Tools & Others",
    items: ["Git", "GitHub", "Vercel", "Figma", "Linux"],
    gradient: "from-purple-500/20 via-pink-500/10 to-transparent",
  },
];

// Animation variants
const containerVariants = {
  hidden: { opacity: 0 },
  visible: {
    opacity: 1,
    transition: {
      staggerChildren: 0.15,
      delayChildren: 0.2,
    },
  },
};

const itemVariants = {
  hidden: {
    opacity: 0,
    y: 60,
    scale: 0.9,
  },
  visible: {
    opacity: 1,
    y: 0,
    scale: 1,
    transition: {
      duration: 0.8,
      ease: [0.16, 1, 0.3, 1] as const,
    },
  },
};

const headerVariants = {
  hidden: { opacity: 0, y: 30 },
  visible: {
    opacity: 1,
    y: 0,
    transition: {
      duration: 0.8,
      ease: [0.16, 1, 0.3, 1] as const,
    },
  },
};

// Individual skill item component
function SkillItem({ name }: { name: string }) {
  const icon = skillIcons[name];

  return (
    <motion.div
      whileHover={{ scale: 1.05, y: -2 }}
      className="group flex flex-col items-center gap-2 md:gap-3 p-3 md:p-4 rounded-xl bg-white/[0.03] border border-white/5 hover:border-white/20 hover:bg-white/[0.06] transition-all duration-300"
    >
      <div className="text-white/60 group-hover:text-white transition-colors duration-300">
        {icon}
      </div>
      <span className="text-xs md:text-sm text-gray-400 group-hover:text-white font-medium transition-colors duration-300 text-center">
        {name}
      </span>
    </motion.div>
  );
}

// Category card component
function SkillCard({
  skill,
  index,
}: {
  skill: (typeof skills)[0];
  index: number;
}) {
  return (
    <motion.div
      variants={itemVariants}
      whileHover={{
        scale: 1.02,
        transition: { duration: 0.3, ease: [0.16, 1, 0.3, 1] as const },
      }}
      className="group relative p-4 md:p-6 lg:p-8 rounded-2xl border border-white/10 bg-white/[0.02] md:backdrop-blur-sm transition-colors duration-500 hover:border-white/20 hover:bg-white/[0.04] overflow-hidden"
    >
      {/* Gradient background on hover */}
      <div
        className={`absolute inset-0 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-500 bg-gradient-to-br ${skill.gradient} pointer-events-none`}
      />

      {/* Category Header */}
      <div className="relative z-10 mb-4 md:mb-6">
        <span className="text-[10px] md:text-xs font-mono text-gray-500 uppercase tracking-[0.3em]">
          0{index + 1}
        </span>
        <h3 className="text-lg md:text-xl lg:text-2xl font-heading font-semibold text-white mt-1 group-hover:text-gradient transition-all duration-300">
          {skill.category}
        </h3>
      </div>

      {/* Skills Grid */}
      <div className="relative z-10 grid grid-cols-2 sm:grid-cols-3 gap-2 md:gap-3">
        {skill.items.map((item) => (
          <SkillItem key={item} name={item} />
        ))}
      </div>

      {/* Corner accent */}
      <div className="absolute top-3 right-3 md:top-4 md:right-4 w-6 h-6 md:w-8 md:h-8 border-t border-r border-white/10 group-hover:border-white/30 transition-colors duration-500" />
    </motion.div>
  );
}

export default function Skills() {
  const sectionRef = useRef<HTMLDivElement>(null);
  const { isMobile } = useDeviceOptimization();

  // Disable scroll tracking on mobile
  const { scrollYProgress } = useSafeScroll(
    sectionRef,
    ["start end", "end start"],
    !isMobile
  );

  // Parallax effects - disabled on mobile
  const bgY = useTransform(scrollYProgress, [0, 1], isMobile ? ["0%", "0%"] : ["-10%", "10%"]);

  return (
    <div
      ref={sectionRef}
      className="relative min-h-screen flex items-center py-16 md:py-20 lg:py-24 overflow-hidden"
    >
      {/* Background accent with parallax - simplified on mobile */}
      <motion.div
        style={isMobile ? {} : { y: bgY }}
        className={`absolute top-1/2 left-0 rounded-full -translate-y-1/2 -translate-x-1/2 pointer-events-none ${
          isMobile
            ? "w-[200px] h-[200px] bg-gradient-radial from-white/[0.01] to-transparent"
            : "w-[300px] md:w-[500px] h-[300px] md:h-[500px] bg-gradient-radial from-white/[0.02] to-transparent blur-3xl"
        }`}
      />

      <div className="container relative z-10 w-full">
        {/* Header */}
        <motion.div
          initial="hidden"
          whileInView="visible"
          viewport={{ once: true }}
          variants={headerVariants}
          className="mb-8 md:mb-12 lg:mb-16"
        >
          {/* Section Label */}
          <div className="flex items-center gap-3 md:gap-4 mb-4 md:mb-6">
            <span className="text-[10px] md:text-xs font-mono text-gray-500 uppercase tracking-[0.2em] md:tracking-[0.3em]">
              03
            </span>
            <div className="w-8 md:w-12 h-[1px] bg-gray-700" />
            <span className="text-[10px] md:text-xs font-mono text-gray-500 uppercase tracking-[0.2em] md:tracking-[0.3em]">
              Skills
            </span>
          </div>

          <h2 className="text-2xl sm:text-3xl md:text-5xl lg:text-6xl font-heading font-bold text-white tracking-tight">
            Tools & Technologies
          </h2>
          <p className="text-sm md:text-lg lg:text-xl text-gray-400 mt-3 md:mt-6 max-w-2xl leading-relaxed">
            Technologies I use to bring ideas to life.
          </p>
        </motion.div>

        {/* Skills Grid */}
        <motion.div
          variants={containerVariants}
          initial="hidden"
          whileInView="visible"
          viewport={{ once: true }}
          className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6"
        >
          {skills.map((skill, index) => (
            <SkillCard key={index} skill={skill} index={index} />
          ))}
        </motion.div>
      </div>
    </div>
  );
}
